{% extends "base.html" %}

{% block content %}
<div class="auth-container">
    <div class="auth-card">
        <h2>{{ translations.register }}</h2>
        <form method="POST" action="{{ url_for('register', lang=lang) }}">
            <!-- 个人基本信息 -->
            <div class="form-group">
                <label for="phone">{{ translations.phone }}</label>
                <input type="tel" id="phone" name="phone" required placeholder="{{ translations.phone_placeholder }}">
            </div>
            <div class="form-row">
                <div class="form-group" style="flex: 2; margin-left: 0.5rem;">
                    <label for="first_name">{{ translations.first_name }}</label>
                    <input type="text" id="first_name" name="first_name" required placeholder="{{ translations.first_name_placeholder }}">
                </div>
                <div class="form-group" style="flex: 1; margin-right: 0.5rem;">
                    <label for="last_name">{{ translations.last_name }}</label>
                    <input type="text" id="last_name" name="last_name" required placeholder="{{ translations.last_name_placeholder }}">
                </div>
            </div>
            <div class="form-group">
                <label for="email">{{ translations.email }}</label>
                <input type="email" id="email" name="email" placeholder="{{ translations.email_optional_placeholder }}">
            </div>
            <div class="form-group">
                <label for="school">{{ translations.school }}</label>
                <input type="text" id="school" name="school" placeholder="{{ translations.school_optional_placeholder }}">
            </div>
            <div class="form-group">
                <label for="education_level">{{ translations.education_level }}</label>
                <select id="education_level" name="education_level" onchange="loadGrades(this.value)">
                    <option value="">{{ translations.select_school_level }}</option>
                    <option value="1">{{ translations.education_elementary }}</option>
                    <option value="2">{{ translations.education_junior_high }}</option>
                    <option value="3">{{ translations.education_senior_high }}</option>
                    <option value="4">{{ translations.education_university }}</option>
                </select>
            </div>
            <div class="form-group">
                <label for="grade">{{ translations.grade }}</label>
                <select id="grade" name="grade">
                    <option value="">{{ translations.please_select_school_level }}</option>
                </select>
            </div>
            <div class="form-group">
                <label for="password">{{ translations.password }}</label>
                <input type="password" id="password" name="password" required placeholder="{{ translations.password_placeholder }}">
            </div>
            <div class="form-group">
                <label for="confirm_password">{{ translations.confirm_password }}</label>
                <input type="password" id="confirm_password" name="confirm_password" required placeholder="{{ translations.confirm_password_placeholder }}">
            </div>
            <button type="submit" class="btn">{{ translations.register }}</button>
        </form>
        <div class="auth-links">
            <a href="{{ url_for('login', lang=lang) }}">{{ translations.return_to_login }}</a>
        </div>
    </div>
</div>

<script>
function loadGrades(educationLevel) {
    const gradeSelect = document.getElementById('grade');
    gradeSelect.innerHTML = `<option value="">${window.TRANSLATIONS.please_select || 'Please select'}</option>`;
    
    if (!educationLevel) {
        gradeSelect.innerHTML = `<option value="">${window.TRANSLATIONS.please_select_school_level || 'Please select a school level'}</option>`;
        return;
    }
    
    // 根据教育级别加载年级选项
    let grades = [];
    
    if (educationLevel === '1') { // 小学
        grades = [
            ['1', window.TRANSLATIONS.grade_1 || 'Grade 1'],
            ['2', window.TRANSLATIONS.grade_2 || 'Grade 2'],
            ['3', window.TRANSLATIONS.grade_3 || 'Grade 3'],
            ['4', window.TRANSLATIONS.grade_4 || 'Grade 4'],
            ['5', window.TRANSLATIONS.grade_5 || 'Grade 5'],
            ['6', window.TRANSLATIONS.grade_6 || 'Grade 6']
        ];
    } else if (educationLevel === '2') { // 初中
        grades = [
            ['1', window.TRANSLATIONS.grade_7 || 'Grade 7'],
            ['2', window.TRANSLATIONS.grade_8 || 'Grade 8'],
            ['3', window.TRANSLATIONS.grade_9 || 'Grade 9']
        ];
    } else if (educationLevel === '3') { // 高中
        grades = [
            ['1', window.TRANSLATIONS.grade_10 || 'Grade 10'],
            ['2', window.TRANSLATIONS.grade_11 || 'Grade 11'],
            ['3', window.TRANSLATIONS.grade_12 || 'Grade 12']
        ];
    } else if (educationLevel === '4') { // 大学
        grades = [
            ['1', window.TRANSLATIONS.freshman || 'Freshman'],
            ['2', window.TRANSLATIONS.sophomore || 'Sophomore'],
            ['3', window.TRANSLATIONS.junior || 'Junior'],
            ['4', window.TRANSLATIONS.senior || 'Senior'],
            ['5', window.TRANSLATIONS.postgraduate || 'Postgraduate']
        ];
    }
    
    // 添加年级选项
    grades.forEach(grade => {
        const option = document.createElement('option');
        option.value = grade[0];
        option.textContent = grade[1];
        gradeSelect.appendChild(option);
    });
}
</script>
{% endblock %}